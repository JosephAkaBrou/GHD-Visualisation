df = data3[data3$cause == "Road injuries" & data3$year =="2017",]
#df = read.csv('./data3.csv')
data3 = read.csv("data3.csv", sep = ",")
df = data3[data3$cause == "Road injuries" & data3$year =="2017",]
df_select = df[,c("location", "sex", "val")]
df_t = dcast(df_select, location ~ sex, fun = sum)
df_t$total = df_t$Female + df_t$Male
df_t$taux_female = paste(round((df_t$Female / df_t$total)*100,0), "%")
df_t$taux_male = paste(round((df_t$Male / df_t$total)*100,0), "%")
df_t$Country = df_t$location
# Jointure
df_final = left_join(df_geo_pop,df_t, by = c("admin"="location"))
# Carte
gg <- ggplot(df_final) +
geom_sf_interactive(mapping = aes(fill = (total/(eval(parse(text = "2017"))))*100,
tooltip = paste("Pays : ",
admin,"<br/>",
"Taux de mortalité : ",
paste(round((total/(eval(parse(text = "2017"))))*100,2), " %"), "<br/>",
"Nombre de morts : ",
round(total,0), "<br/>",
"Taux de morts 'Female' : ",
taux_female, "<br/>",
"Taux de morts 'Male' : ",
taux_male, "<br/>"),
data_id =admin))+
scale_fill_gradient2(name = "Taux de mortalité (en %)",mid = "lightyellow", high = "red",
na.value="lightgrey",guide = "colourbar")+
ggtitle(paste("Taux de mortalité en ", input$id_an, "par", input$id_cause))+
theme(plot.title = element_text(hjust = 0.5, face = "bold"))+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_rect(fill = "gray96"))+
xlab(NULL)+
ylab(NULL)+
geom_rect(xmin = -25, xmax = -15, ymin = 30, ymax = 32,
fill = "lightgrey", color = "gray43", size = 0.4)+
annotate(geom = "text", x = -20, y = 31, label = "NA", color = "grey22", size = 4)
# Carte
gg <- ggplot(df_final) +
geom_sf_interactive(mapping = aes(fill = (total/(eval(parse(text = "2017"))))*100,
tooltip = paste("Pays : ",
admin,"<br/>",
"Taux de mortalité : ",
paste(round((total/(eval(parse(text = "2017"))))*100,2), " %"), "<br/>",
"Nombre de morts : ",
round(total,0), "<br/>",
"Taux de morts 'Female' : ",
taux_female, "<br/>",
"Taux de morts 'Male' : ",
taux_male, "<br/>"),
data_id =admin))+
scale_fill_gradient2(name = "Taux de mortalité (en %)",mid = "lightyellow", high = "red",
na.value="lightgrey",guide = "colourbar")+
#ggtitle(paste("Taux de mortalité en ", input$id_an, "par", input$id_cause))+
theme(plot.title = element_text(hjust = 0.5, face = "bold"))+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_rect(fill = "gray96"))+
xlab(NULL)+
ylab(NULL)+
geom_rect(xmin = -25, xmax = -15, ymin = 30, ymax = 32,
fill = "lightgrey", color = "gray43", size = 0.4)+
annotate(geom = "text", x = -20, y = 31, label = "NA", color = "grey22", size = 4)
girafe(ggobj = gg) %>%
girafe_options(opts_tooltip(opacity = .8),
opts_zoom(min = .5, max = 4),
opts_hover(css = "fill:white;stroke:orange;r:7pt;") )
colnames(df_final) = paste0("col_",colnames(df_final))
runApp()
shiny::runApp()
runApp()
shiny::runApp()
library(shiny)
library(shinymaterial)
source("carto.R")
library(leaflet)
library(plotly)
library(ggplot2)
library(hrbrthemes)
library(dplyr)
library(ggforce)
library(ggiraph)
#df = read.csv('./data3.csv')
data3 = read.csv("data3.csv", sep = ",")
# Ici j'ai cr?er les vecteurs de valeurs qui permetent de changer le visuel ####
data = data3
sex = as.character(unique(data$sex))
causes = as.character(unique(data$cause))
location = as.character(unique(data$location))
data$year = as.factor(data$year)
year = unique(data$year)
year
unique(data$location)
runApp()
runApp()
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
ggplotly(p)
data$year = as.factor(data$year)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
# geom_mark_ellipse(aes(fill = Country,
#                       label = Country),
#                   expand = 0.005,
#                   alpha = 0.1,
#                   size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
p
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
ggplotly(p)
data$year = as.Date(data$year)
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
data$year
data$year = as.character(data$year)
data$year
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
# geom_mark_ellipse(aes(fill = Country,
#                       label = Country),
#                   expand = 0.005,
#                   alpha = 0.1,
#                   size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
data$year = as.Date.character(data$year)
data$year = as.Date.(data$year)
data$year = as.Date(data$year)
data$year = as_date(data$year)
data$year = year(data$year)
data$year
data$year = as.character(data$year)
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
# geom_mark_ellipse(aes(fill = Country,
#                       label = Country),
#                   expand = 0.005,
#                   alpha = 0.1,
#                   size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
p <- ggploty(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p <- ggplotly(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
data$year <- as.Date(as.character(data$year), format = "%Y")
data$year <- year(data$year)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
runApp()
type(data$year)
unique(data$year)
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
scale_x_continuous(breaks = c(1, 2,4,5,6,7,8,9,10 ),
labels = c("2010" ,"2011", "2012", "2013", "2014",  "2015", "2016", "2017", "2018", "2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
last_error()
rlang::last_error()
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
scale_x_continuous(breaks = c(1, 2,3,4,5,6,7,8,9,10 ),
labels = c("2010" ,"2011", "2012", "2013", "2014",  "2015", "2016", "2017", "2018", "2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
scale_x_discrete(labels = c("2010" ,"2011", "2012", "2013", "2014",  "2015", "2016", "2017", "2018", "2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
ggplotly(p)
p
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
# geom_mark_ellipse(aes(fill = Country,
#                       label = Country),
#                   expand = 0.005,
#                   alpha = 0.1,
#                   size = 0.1) +
# theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
p
runApp()
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
ggiraph(p)
p
girafe(p)
library(ggiraph)
# geom_mark_ellipse(aes(fill = Country,
#                       label = Country),
#                   expand = 0.005,
#                   alpha = 0.1,
#                   size = 0.1) +
# theme_ipsum() +
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
#scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
girafe(ggobj = p)
data$year <- paste0("y", data$year)
unique(data$year)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
#scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
#scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
source('~/Desktop/GHD-Visualisation/graph_dans_le_temps.R')
d$year <- as.Date(as.character(d$year), format = "%Y")
d$year <- year(d$year)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
#scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
girafe(ggobj = p)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
#scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
d$year <- year(d$year)
d$year
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
#scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
ggplotly(p)
p <- ggplot(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
p
p <- plot_ly(data = subset(d, Country != "Europe"), mapping = aes(x = year, y = val, group=Country)) +
scale_x_discrete(labels = c("y2010" ,"y2011", "y2012", "y2013", "y2014",  "y2015", "y2016", "y2017", "y2018", "y2019"))+
geom_mark_ellipse(aes(fill = Country,
label = Country),
expand = 0.005,
alpha = 0.1,
size = 0.1) +
theme_ipsum() +
geom_ribbon(aes(ymin = lower, ymax = upper), fill = "grey70", alpha = 0.3) +
geom_line(color="black") +
geom_line(data=subset(d, Country=="Europe"), aes(x=year, y=val, group="Europe"), linetype=2, color="red") +
geom_point(shape=21, color="grey", fill="#69b3a2", size=3) +
facet_wrap( ~ sex, ncol=2) +
ggtitle(paste("Evolution des morts de", cause_value,"en ", list_des_pays)) +
geom_text(data = ann_text_men, aes(label = "European mean for Men", group=1)) +
geom_text(data = ann_text_women, aes(label = "European mean for Women", group=1))
source('~/Desktop/GHD-Visualisation/plot_treemap_copie.R')
install.packages("treemapify")
install.packages("bit64")
install.packages("treemap")
install.packages("treemapify")
install.packages("treemapify")
devtools::install_github("wilkox/treemapify")
update
install.packages("installr")
library(devtools)
install_github('andreacirilloac/updateR')
